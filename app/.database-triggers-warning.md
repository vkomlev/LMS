# ‚ö†Ô∏è –í–ù–ò–ú–ê–ù–ò–ï: –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –≤ –ë–î —á–µ—Ä–µ–∑ —Ç—Ä–∏–≥–≥–µ—Ä—ã

**–≠—Ç–æ—Ç —Ñ–∞–π–ª –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –∫–æ—Ä–Ω–µ –º–æ–¥—É–ª—è `app/` –¥–ª—è –ø—Ä–∏–≤–ª–µ—á–µ–Ω–∏—è –≤–Ω–∏–º–∞–Ω–∏—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤.**

## üö´ –ó–ê–ü–†–ï–©–ï–ù–û –¥—É–±–ª–∏—Ä–æ–≤–∞—Ç—å –≤ –∫–æ–¥–µ:

1. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –Ω—É–º–µ—Ä–∞—Ü–∏—è `order_number` –≤ `user_courses`**
   - –¢—Ä–∏–≥–≥–µ—Ä: `trg_set_user_course_order_number`
   - ‚ùå –ù–ï –≤—ã—á–∏—Å–ª—è—Ç—å `order_number` –≤—Ä—É—á–Ω—É—é –ø–µ—Ä–µ–¥ INSERT
   - ‚ùå –ù–ï –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞—Ç—å `order_number` –≤—Ä—É—á–Ω—É—é –ø—Ä–∏ UPDATE/DELETE

2. **–í–∞–ª–∏–¥–∞—Ü–∏—è —Ü–∏–∫–ª–æ–≤ –≤ –∏–µ—Ä–∞—Ä—Ö–∏–∏ –∫—É—Ä—Å–æ–≤**
   - –¢—Ä–∏–≥–≥–µ—Ä: `trg_check_course_hierarchy_cycle`
   - ‚ùå –ù–ï –ø—Ä–æ–≤–µ—Ä—è—Ç—å —Ü–∏–∫–ª—ã –≤—Ä—É—á–Ω—É—é —á–µ—Ä–µ–∑ —Ä–µ–∫—É—Ä—Å–∏–≤–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã
   - ‚ùå –ù–ï –≤–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å —Å–∞–º–æ—Å—Å—ã–ª–∫–∏ –≤—Ä—É—á–Ω—É—é

3. **–ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ —Å–∞–º–æ—Å—Å—ã–ª–æ–∫ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è—Ö**
   - –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ: `check_no_self_dependency`
   - ‚ùå –ù–ï –ø—Ä–æ–≤–µ—Ä—è—Ç—å `course_id == required_course_id` –≤—Ä—É—á–Ω—É—é

## ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û:

- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç—Ä–∏–≥–≥–µ—Ä—ã –ë–î –∫–∞–∫ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –∏—Å—Ç–∏–Ω—ã
- –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å `IntegrityError` –æ—Ç —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤ –∏ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤—ã–≤–∞—Ç—å –≤ `DomainError`
- –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤ –≤ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è—Ö

## üìö –ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏:

–°–º. **[docs/database-triggers-contract.md](../../docs/database-triggers-contract.md)** - –ø–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–∞–∫—Ç —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º –≤—Å–µ—Ö —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤ –∏ –ø—Ä–∞–≤–∏–ª.

---

**–ü—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤–æ–π –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏:**
1. –ü—Ä–æ–≤–µ—Ä—å —ç—Ç–æ—Ç —Ñ–∞–π–ª –∏ –∫–æ–Ω—Ç—Ä–∞–∫—Ç
2. –ï—Å–ª–∏ –ª–æ–≥–∏–∫–∞ –µ—Å—Ç—å –≤ –ë–î ‚Üí –ù–ï –¥–æ–±–∞–≤–ª—è–π –≤ –∫–æ–¥
3. –ï—Å–ª–∏ –ª–æ–≥–∏–∫–∏ –Ω–µ—Ç ‚Üí –¥–æ–±–∞–≤—å –≤ –ë–î —á–µ—Ä–µ–∑ –º–∏–≥—Ä–∞—Ü–∏—é, –∑–∞—Ç–µ–º –æ–±–Ω–æ–≤–∏ –∫–æ–Ω—Ç—Ä–∞–∫—Ç
