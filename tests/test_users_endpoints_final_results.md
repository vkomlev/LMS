# –§–∏–Ω–∞–ª—å–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã smoke —Ç–µ—Å—Ç–æ–≤ –¥–ª—è —ç–Ω–¥–ø–æ–π–Ω—Ç–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

**–î–∞—Ç–∞:** 26 —è–Ω–≤–∞—Ä—è 2026  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–í–°–ï –¢–ï–°–¢–´ –ü–†–û–ô–î–ï–ù–´**

## –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

**–ü—Ä–æ–π–¥–µ–Ω–æ:** 7/7 —Ç–µ—Å—Ç–æ–≤ (100%) ‚úÖ

### –î–µ—Ç–∞–ª—å–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã:

1. ‚úÖ **GET /users/ (–±–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤)** - PASSED
2. ‚úÖ **GET /users/?sort_by=full_name&order=asc** - PASSED (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ!)
3. ‚úÖ **GET /users/?sort_by=email&order=desc** - PASSED
4. ‚úÖ **GET /users/?role=student** - PASSED
5. ‚úÖ **GET /users/?role=teacher** - PASSED
6. ‚úÖ **GET /users/?skip=0&limit=5&sort_by=created_at&order=desc&role=student** - PASSED
7. ‚úÖ **GET /users/?skip=0&limit=2 (pagination)** - PASSED

## –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### 1. –î–æ–±–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ NULL –∑–Ω–∞—á–µ–Ω–∏–π –≤ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–µ
**–§–∞–π–ª:** `app/repos/users_repo.py`

–î–æ–±–∞–≤–ª–µ–Ω `nullslast()` –¥–ª—è –≤—Å–µ—Ö –ø–æ–ª–µ–π —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏, —á—Ç–æ–±—ã NULL –∑–Ω–∞—á–µ–Ω–∏—è –≤—Å–µ–≥–¥–∞ —à–ª–∏ –≤ –∫–æ–Ω–µ—Ü —Å–ø–∏—Å–∫–∞:

```python
from sqlalchemy import nullslast
order_by_with_nulls = []
for order_expr in order_by:
    order_by_with_nulls.append(nullslast(order_expr))
stmt = stmt.order_by(*order_by_with_nulls)
```

### 2. –£–ª—É—á—à–µ–Ω —Ç–µ—Å—Ç —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ –ø–æ full_name
**–§–∞–π–ª:** `tests/test_users_endpoints_smoke.ps1`

–¢–µ—Å—Ç —Ç–µ–ø–µ—Ä—å:
- –°—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç –ø–æ—Ä—è–¥–æ–∫ ID —Å –æ–∂–∏–¥–∞–µ–º—ã–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º –∏–∑ –ë–î —á–µ—Ä–µ–∑ MCP
- –£—á–∏—Ç—ã–≤–∞–µ—Ç —Ä–∞–∑–ª–∏—á–∏—è –≤ collation –º–µ–∂–¥—É PostgreSQL –∏ PowerShell
- –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç NULL –∑–Ω–∞—á–µ–Ω–∏—è

## –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ MCP

**–†–æ–ª–∏:**
- ‚úÖ "student" (id: 10) - —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
- ‚úÖ "teacher" (id: 11) - —Å—É—â–µ—Å—Ç–≤—É–µ—Ç

**–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏:**
- ‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å —Ä–æ–ª—å—é "student": 3
- ‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å —Ä–æ–ª—å—é "teacher": 2
- ‚úÖ –í—Å–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π: 12

**–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ –≤ –ë–î:**
```sql
SELECT u.id, u.full_name FROM users u 
ORDER BY u.full_name ASC NULLS LAST
```

–†–µ–∑—É–ª—å—Ç–∞—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –æ–∂–∏–¥–∞–µ–º–æ–º—É:
1. Monoxid Cmaul (id: 11) - –ª–∞—Ç–∏–Ω–∏—Ü–∞
2. –ì—Ä–∏–≥–æ—Ä–∏–π (id: 12) - –∫–∏—Ä–∏–ª–ª–∏—Ü–∞
3. –ò–≤–∞–Ω–æ–≤ –ü–µ—Ç—Ä –°–µ—Ä–≥–µ–µ–≤–∏—á (id: 1) - –∫–∏—Ä–∏–ª–ª–∏—Ü–∞
4. ... –∏ —Ç.–¥.

## –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–ù–µ—Ç –æ—à–∏–±–æ–∫ –≤ –ª–æ–≥–∞—Ö**

–í—Å–µ –∑–∞–ø—Ä–æ—Å—ã –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è —É—Å–ø–µ—à–Ω–æ (HTTP 200). –í –ª–æ–≥–∞—Ö –Ω–µ—Ç –æ—à–∏–±–æ–∫, —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å –Ω–æ–≤—ã–º–∏ —ç–Ω–¥–ø–æ–π–Ω—Ç–∞–º–∏.

## –í—ã–≤–æ–¥—ã

### ‚úÖ –í—Å–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω—ã:

1. **–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –ø–æ–ª—è–º:**
   - ‚úÖ full_name (ASC) - —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
   - ‚úÖ email (DESC) - —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
   - ‚úÖ created_at (DESC) - —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

2. **–ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏:**
   - ‚úÖ ASC - —Ä–∞–±–æ—Ç–∞–µ—Ç
   - ‚úÖ DESC - —Ä–∞–±–æ—Ç–∞–µ—Ç

3. **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Ä–æ–ª–∏:**
   - ‚úÖ –§–∏–ª—å—Ç—Ä –ø–æ "student" - —Ä–∞–±–æ—Ç–∞–µ—Ç
   - ‚úÖ –§–∏–ª—å—Ç—Ä –ø–æ "teacher" - —Ä–∞–±–æ—Ç–∞–µ—Ç
   - ‚úÖ –í—Å–µ –≤–æ–∑–≤—Ä–∞—â–µ–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∏–º–µ—é—Ç —É–∫–∞–∑–∞–Ω–Ω—É—é —Ä–æ–ª—å

4. **–ü–∞–≥–∏–Ω–∞—Ü–∏—è:**
   - ‚úÖ –ü–∞—Ä–∞–º–µ—Ç—Ä—ã skip –∏ limit —Ä–∞–±–æ—Ç–∞—é—Ç
   - ‚úÖ –ù–µ—Ç –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏–π –º–µ–∂–¥—É —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º–∏
   - ‚úÖ –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ (total, limit, offset) –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã

5. **–ö–æ–º–±–∏–Ω–∞—Ü–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤:**
   - ‚úÖ –í—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Ä–∞–±–æ—Ç–∞—é—Ç –≤–º–µ—Å—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

### üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —É–ª—É—á—à–µ–Ω–∏—è:

1. –î–æ–±–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ NULL –∑–Ω–∞—á–µ–Ω–∏–π –≤ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–µ (NULLS LAST)
2. –£–ª—É—á—à–µ–Ω–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è –≤ —Ç–µ—Å—Ç–∞—Ö (—Å—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å –ë–î —á–µ—Ä–µ–∑ MCP)
3. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –ø—Ä–æ–±–ª–µ–º—ã —Å –∫–æ–¥–∏—Ä–æ–≤–∫–æ–π –≤ —Ç–µ—Å—Ç–∞—Ö

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

1. ‚úÖ **–ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é** - –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
2. ‚úÖ **–¢–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç** - –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ CI/CD
3. ‚úÖ **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞** - –ø–ª–∞–Ω –≤–Ω–µ–¥—Ä–µ–Ω–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω

---

**–ò—Ç–æ–≥:** ‚úÖ **–í–°–ï –¢–ï–°–¢–´ –ü–†–û–ô–î–ï–ù–´ –£–°–ü–ï–®–ù–û**

–í—Å–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∏ –≥–æ—Ç–æ–≤—ã –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ.
