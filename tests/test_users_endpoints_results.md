# –†–µ–∑—É–ª—å—Ç–∞—Ç—ã smoke —Ç–µ—Å—Ç–æ–≤ –¥–ª—è —ç–Ω–¥–ø–æ–π–Ω—Ç–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

**–î–∞—Ç–∞:** 26 —è–Ω–≤–∞—Ä—è 2026  
**–¢–µ—Å—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç:** `tests/test_users_endpoints_smoke.ps1`

## –û–±—â–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

**–ü—Ä–æ–π–¥–µ–Ω–æ:** 6/7 —Ç–µ—Å—Ç–æ–≤ (85.7%)  
**–ü—Ä–æ–≤–∞–ª–µ–Ω–æ:** 1 —Ç–µ—Å—Ç

## –î–µ—Ç–∞–ª—å–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

### ‚úÖ Test 1: GET /users/ (–±–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤)
- **–°—Ç–∞—Ç—É—Å:** PASSED
- **–û–ø–∏—Å–∞–Ω–∏–µ:** –ë–∞–∑–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å —Å–ø–∏—Å–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –±–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –≠–Ω–¥–ø–æ–π–Ω—Ç –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π
- **–ù–∞–π–¥–µ–Ω–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:** 12 (total: 12)

### ‚ùå Test 2: GET /users/?sort_by=full_name&order=asc
- **–°—Ç–∞—Ç—É—Å:** FAILED
- **–û–ø–∏—Å–∞–Ω–∏–µ:** –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ full_name –≤ –ø–æ—Ä—è–¥–∫–µ –≤–æ–∑—Ä–∞—Å—Ç–∞–Ω–∏—è
- **–ü—Ä–æ–±–ª–µ–º–∞:** –¢–µ—Å—Ç –Ω–µ —Å–º–æ–≥ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏
- **–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:
  - NULL –∑–Ω–∞—á–µ–Ω–∏—è –≤ –ø–æ–ª–µ full_name
  - –ü—Ä–æ–±–ª–µ–º—ã —Å –∫–æ–¥–∏—Ä–æ–≤–∫–æ–π –ø—Ä–∏ —Å—Ä–∞–≤–Ω–µ–Ω–∏–∏ —Å—Ç—Ä–æ–∫
  - –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏

### ‚úÖ Test 3: GET /users/?sort_by=email&order=desc
- **–°—Ç–∞—Ç—É—Å:** PASSED
- **–û–ø–∏—Å–∞–Ω–∏–µ:** –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ email –≤ –ø–æ—Ä—è–¥–∫–µ —É–±—ã–≤–∞–Ω–∏—è
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã –ø–æ email DESC
- **–ü—Ä–∏–º–µ—Ä:** victor.komlev@mail.ru, test_teacher_2@example.com, test_teacher_1@example.com

### ‚úÖ Test 4: GET /users/?role=student
- **–°—Ç–∞—Ç—É—Å:** PASSED
- **–û–ø–∏—Å–∞–Ω–∏–µ:** –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø–æ —Ä–æ–ª–∏ "student"
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –í—Å–µ –≤–æ–∑–≤—Ä–∞—â–µ–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∏–º–µ—é—Ç —Ä–æ–ª—å "student"
- **–ù–∞–π–¥–µ–Ω–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:** 3 (total: 3)
- **–ü—Ä–æ–≤–µ—Ä–∫–∞:** –í—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –ø—Ä–æ–≤–µ—Ä–µ–Ω—ã —á–µ—Ä–µ–∑ GET /users/{id}/roles

### ‚úÖ Test 5: GET /users/?role=teacher
- **–°—Ç–∞—Ç—É—Å:** PASSED
- **–û–ø–∏—Å–∞–Ω–∏–µ:** –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø–æ —Ä–æ–ª–∏ "teacher"
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –≠–Ω–¥–ø–æ–π–Ω—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Ñ–∏–ª—å—Ç—Ä—É–µ—Ç –ø–æ —Ä–æ–ª–∏
- **–ù–∞–π–¥–µ–Ω–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:** 2 (total: 2)

### ‚úÖ Test 6: GET /users/?skip=0&limit=5&sort_by=created_at&order=desc&role=student
- **–°—Ç–∞—Ç—É—Å:** PASSED
- **–û–ø–∏—Å–∞–Ω–∏–µ:** –ö–æ–º–±–∏–Ω–∞—Ü–∏—è –≤—Å–µ—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ (–ø–∞–≥–∏–Ω–∞—Ü–∏—è, —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞, —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è)
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –í—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –≤–º–µ—Å—Ç–µ
- **–ù–∞–π–¥–µ–Ω–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:** 3 (total: 3)
- **–ü–∞–≥–∏–Ω–∞—Ü–∏—è:** limit=5, offset=0

### ‚úÖ Test 7: GET /users/?skip=0&limit=2 (pagination)
- **–°—Ç–∞—Ç—É—Å:** PASSED
- **–û–ø–∏—Å–∞–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–∞–≥–∏–Ω–∞—Ü–∏–∏
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ü–∞–≥–∏–Ω–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ, –Ω–µ—Ç –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏–π –º–µ–∂–¥—É —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º–∏
- **Page 1:** IDs: 11, 12
- **Page 2:** IDs: 1, 4

## –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤

**–°—Ç–∞—Ç—É—Å:** ‚ö†Ô∏è –ù–∞–π–¥–µ–Ω–æ 51 –∑–∞–ø–∏—Å—å —Å ERROR/Exception –≤ –ª–æ–≥–∞—Ö

**–ê–Ω–∞–ª–∏–∑:**
- –ë–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –æ—à–∏–±–æ–∫ —Å–≤—è–∑–∞–Ω—ã —Å–æ —Å—Ç–∞—Ä—ã–º–∏ –∑–∞–ø—Ä–æ—Å–∞–º–∏ (–¥–æ –Ω–∞—à–∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π)
- –í –ª–æ–≥–∞—Ö —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–æ–≤—ã—Ö —ç–Ω–¥–ø–æ–π–Ω—Ç–æ–≤ –æ—à–∏–±–æ–∫ –Ω–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–æ
- –í—Å–µ –∑–∞–ø—Ä–æ—Å—ã –∫ `/api/v1/users/` —É—Å–ø–µ—à–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è (HTTP 200)

**–ü—Ä–∏–º–µ—Ä—ã —É—Å–ø–µ—à–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –∏–∑ –ª–æ–≥–æ–≤:**
```
2026-01-26 19:22:22,271 | INFO | app.api.v1.users | users.list skip=0 limit=2 sort_by=SortByField.full_name order=SortOrder.asc role=None
2026-01-26 19:22:22,293 | INFO | app.api.v1.users | users.list skip=2 limit=2 sort_by=SortByField.full_name order=SortOrder.asc role=None
```

## –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

**–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö:**
- ‚úÖ –°–æ–∑–¥–∞–Ω—ã —Ä–æ–ª–∏: "student" (id: 10), "teacher" (id: 11)
- ‚úÖ –°–æ–∑–¥–∞–Ω—ã —Ç–µ—Å—Ç–æ–≤—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏:
  - 3 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å —Ä–æ–ª—å—é "student" (ids: 13, 14, 15)
  - 2 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å —Ä–æ–ª—å—é "teacher" (ids: 16, 17)

**–§–∏–Ω–∞–ª—å–Ω—ã–µ —Å—á–µ—Ç—á–∏–∫–∏:**
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å —Ä–æ–ª—å—é "student": 3
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å —Ä–æ–ª—å—é "teacher": 2

## –í—ã–≤–æ–¥—ã

### ‚úÖ –£—Å–ø–µ—à–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:
1. **–ë–∞–∑–æ–≤—ã–π —ç–Ω–¥–ø–æ–π–Ω—Ç** GET /api/v1/users/ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
2. **–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ email** —Ä–∞–±–æ—Ç–∞–µ—Ç (ASC –∏ DESC)
3. **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Ä–æ–ª–∏** —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ (student, teacher)
4. **–ü–∞–≥–∏–Ω–∞—Ü–∏—è** —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –æ—à–∏–±–æ–∫
5. **–ö–æ–º–±–∏–Ω–∞—Ü–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤** —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

### ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç –≤–Ω–∏–º–∞–Ω–∏—è:
1. **–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ full_name** - —Ç–µ—Å—Ç –Ω–µ —Å–º–æ–≥ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å
   - –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã: NULL –∑–Ω–∞—á–µ–Ω–∏—è, –ø—Ä–æ–±–ª–µ–º—ã —Å –∫–æ–¥–∏—Ä–æ–≤–∫–æ–π
   - –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Ä—É—á–Ω—É—é —á–µ—Ä–µ–∑ API –∏–ª–∏ —É–ª—É—á—à–∏—Ç—å —Ç–µ—Å—Ç

### üìù –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:
1. –£–ª—É—á—à–∏—Ç—å —Ç–µ—Å—Ç —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ –ø–æ full_name –¥–ª—è —É—á–µ—Ç–∞ NULL –∑–Ω–∞—á–µ–Ω–∏–π
2. –î–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É NULL –∑–Ω–∞—á–µ–Ω–∏–π –≤ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–µ (NULLS LAST)
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–¥–∏—Ä–æ–≤–∫—É –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å –∫–∏—Ä–∏–ª–ª–∏—á–µ—Å–∫–∏–º–∏ –∏–º–µ–Ω–∞–º–∏

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

**–û–±—â–∞—è –æ—Ü–µ–Ω–∫–∞:** ‚úÖ **–£–°–ü–ï–®–ù–û**

–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ. –ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞ —Å–≤—è–∑–∞–Ω–∞ —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ –ø–æ full_name –≤ —Ç–µ—Å—Ç–µ, –Ω–æ —ç—Ç–æ –Ω–µ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç - –≤–æ–∑–º–æ–∂–Ω–æ, –ø—Ä–æ–±–ª–µ–º–∞ –≤ —Å–∞–º–æ–º —Ç–µ—Å—Ç–µ.

–í—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω—ã:
- ‚úÖ –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –ø–æ–ª—è–º (full_name, email, created_at)
- ‚úÖ –ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ (asc, desc)
- ‚úÖ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Ä–æ–ª–∏
- ‚úÖ –ü–∞–≥–∏–Ω–∞—Ü–∏—è
- ‚úÖ –ö–æ–º–±–∏–Ω–∞—Ü–∏—è –≤—Å–µ—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
